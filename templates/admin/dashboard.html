{% extends 'admin/layout.html' %}
{% block title %}–î–∞—à–±–æ—Ä–¥{% endblock %}
{% block content %}
<h2>üìä –î–∞—à–±–æ—Ä–¥</h2>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-label">–¢–æ–≤–∞—Ä–∏</div>
        <div class="stat-value">{{ product_count }}</div>
        <div class="stat-desc">–ê–∫—Ç–∏–≤–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó –≤ –∫–∞—Ç–∞–ª–æ–∑—ñ</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</div>
        <div class="stat-value">{{ category_count }}</div>
        <div class="stat-desc">–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∞–≥–∞–∑–∏–Ω—É</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
        <div class="stat-value">{{ order_count }}</div>
        <div class="stat-desc">–ó–∞–≥–∞–ª–æ–º —É —Å–∏—Å—Ç–µ–º—ñ</div>
    </div>
    <div class="stat-card">
        <div class="stat-label">–î–æ—Ö—ñ–¥</div>
        <div class="stat-value">{{ '%.2f'|format(total_revenue) }} ‚Ç¨</div>
        <div class="stat-desc">–û–ø–ª–∞—á–µ–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</div>
    </div>
</div>

<div class="card">
    <h3 style="display: flex; align-items: center; gap: 0.5rem;">
        üõí –û—Å—Ç–∞–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
    </h3>
    {% if last_orders %}
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>–î–∞—Ç–∞</th>
                <th>–ö–ª—ñ—î–Ω—Ç</th>
                <th>–°—É–º–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th class="text-right">–î—ñ—ó</th>
            </tr>
        </thead>
        <tbody>
        {% for o in last_orders %}
            <tr>
                <td><strong>#{{ o.id }}</strong></td>
                <td>{{ o.created_at.strftime('%d.%m.%Y %H:%M') }}</td>
                <td>{{ o.customer_name or o.customer_email or '–ì—ñ—Å—Ç—å' }}</td>
                <td><strong>{{ '%.2f'|format(o.amount) }}</strong> {{ o.currency }}</td>
                <td>
                    <span class="badge status-{{ o.status }}">
                        {% if o.status == 'created' %}–°—Ç–≤–æ—Ä–µ–Ω–æ
                        {% elif o.status == 'pending' %}–û—á—ñ–∫—É—î
                        {% elif o.status == 'paid' %}–û–ø–ª–∞—á–µ–Ω–æ
                        {% elif o.status == 'shipped' %}–í—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ
                        {% elif o.status == 'delivered' %}–î–æ—Å—Ç–∞–≤–ª–µ–Ω–æ
                        {% elif o.status == 'cancelled' %}–°–∫–∞—Å–æ–≤–∞–Ω–æ
                        {% else %}{{ o.status }}{% endif %}
                    </span>
                </td>
                <td class="text-right">
                    <a href="{{ url_for('admin_order_detail', order_id=o.id) }}" class="btn-link">–î–µ—Ç–∞–ª—ñ ‚Üí</a>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
    <div style="margin-top: 1rem;">
        <a href="{{ url_for('admin_orders') }}" class="btn-link">–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –≤—Å—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Üí</a>
    </div>
    {% else %}
        <p class="text-muted">–ó–∞–º–æ–≤–ª–µ–Ω—å —â–µ –Ω–µ–º–∞—î. –í–æ–Ω–∏ –∑'—è–≤–ª—è—Ç—å—Å—è –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ—ó –ø–æ–∫—É–ø–∫–∏.</p>
    {% endif %}
</div>

<div class="grid-2">
    <div class="card">
        <h3>üöÄ –®–≤–∏–¥–∫—ñ –¥—ñ—ó</h3>
        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <a href="{{ url_for('admin_products') }}" class="btn-link" style="justify-content: flex-start;">üì¶ –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–∏–π —Ç–æ–≤–∞—Ä</a>
            <a href="{{ url_for('admin_categories') }}" class="btn-link" style="justify-content: flex-start;">üìÅ –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏</a>
            <a href="{{ url_for('admin_blocks') }}" class="btn-link" style="justify-content: flex-start;">üè† –†–µ–¥–∞–≥—É–≤–∞—Ç–∏ –≥–æ–ª–æ–≤–Ω—É</a>
            <a href="{{ url_for('admin_settings') }}" class="btn-link" style="justify-content: flex-start;">‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∞–π—Ç—É</a>
        </div>
    </div>
    <div class="card">
        <h3>üí° –ü–æ—Ä–∞–¥–∏</h3>
        <ul style="font-size: 0.85rem; color: var(--text-secondary); padding-left: 1.2rem; margin: 0;">
            <li style="margin-bottom: 0.5rem;">–î–æ–¥–∞–π—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º —Ç–æ–≤–∞—Ä—ñ–≤</li>
            <li style="margin-bottom: 0.5rem;">–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —è–∫—ñ—Å–Ω—ñ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤</li>
            <li style="margin-bottom: 0.5rem;">–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –æ–ø–∏—Å –∫–æ–∂–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É –¥–ª—è SEO</li>
            <li>–ù–∞–ª–∞—à—Ç—É–π—Ç–µ —Å–æ—Ü–º–µ—Ä–µ–∂—ñ –≤ —Ä–æ–∑–¥—ñ–ª—ñ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</li>
        </ul>
    </div>
</div>
{% endblock %}
