{% extends 'admin/layout.html' %}
{% block title %}–†–µ–¥–∞–≥—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä - –ê–¥–º—ñ–Ω –ø–∞–Ω–µ–ª—å{% endblock %}
{% block content %}
<div class="page-header" style="display: flex; justify-content: space-between; align-items: center;">
    <div>
        <h1>‚úèÔ∏è –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É</h1>
        <p class="page-subtitle">{{ product.name }}</p>
    </div>
    <a href="{{ url_for('admin_products') }}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –¥–æ —Å–ø–∏—Å–∫—É</a>
</div>

<form method="post">
    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-header">
            <h3>üì¶ –û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h3>
        </div>
        <div class="form-section">
            <div class="form-row three-col">
                <div class="form-group">
                    <label for="name">–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É *</label>
                    <input type="text" id="name" name="name" value="{{ product.name }}" required>
                </div>
                <div class="form-group">
                    <label for="price">–¶—ñ–Ω–∞ *</label>
                    <input type="number" id="price" name="price" value="{{ product.price }}" step="0.01" min="0" required>
                </div>
                <div class="form-group">
                    <label for="old_price">–°—Ç–∞—Ä–∞ —Ü—ñ–Ω–∞</label>
                    <input type="number" id="old_price" name="old_price" value="{{ product.old_price or '' }}" step="0.01" min="0" placeholder="–î–ª—è –∑–Ω–∏–∂–∫–∏">
                </div>
            </div>
            
            <div class="form-row three-col">
                <div class="form-group">
                    <label for="category_id">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label>
                    <select id="category_id" name="category_id">
                        <option value="">(–±–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó)</option>
                        {% for c in categories %}
                            <option value="{{ c.id }}" {% if product.category_id == c.id %}selected{% endif %}>
                                {{ c.name }}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group">
                    <label for="sku">SKU / –ê—Ä—Ç–∏–∫—É–ª</label>
                    <input type="text" id="sku" name="sku" value="{{ product.sku or '' }}" placeholder="ABC-123">
                </div>
                <div class="form-group">
                    <label for="stock">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥—ñ</label>
                    <input type="number" id="stock" name="stock" value="{{ product.stock or 0 }}" min="0">
                </div>
            </div>
        </div>
    </div>

    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-header">
            <h3>üñºÔ∏è –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h3>
        </div>
        <div class="form-section">
            <div class="form-group">
                <label for="image_url">URL –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</label>
                <input type="url" id="image_url" name="image_url" value="{{ product.image_url or '' }}" placeholder="https://example.com/image.jpg">
            </div>
            
            {% if product.image_url %}
            <div class="image-preview">
                <label>–ü–æ—Ç–æ—á–Ω–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:</label>
                <img src="{{ product.image_url }}" alt="{{ product.name }}">
            </div>
            {% endif %}
        </div>
    </div>

    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-header">
            <h3>üìù –û–ø–∏—Å–∏</h3>
        </div>
        <div class="form-section">
            <div class="form-group">
                <label for="short_description">–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å</label>
                <textarea id="short_description" name="short_description" rows="3" placeholder="–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å –¥–ª—è –∫–∞—Ç–∞–ª–æ–≥—É...">{{ product.short_description or '' }}</textarea>
            </div>
            
            <div class="form-group">
                <label for="long_description">–ü–æ–≤–Ω–∏–π –æ–ø–∏—Å</label>
                <textarea id="long_description" name="long_description" rows="6" placeholder="–î–µ—Ç–∞–ª—å–Ω–∏–π –æ–ø–∏—Å —Ç–æ–≤–∞—Ä—É...">{{ product.long_description or '' }}</textarea>
            </div>
        </div>
    </div>

    <div class="card" style="margin-bottom: 2rem;">
        <div class="card-header">
            <h3>‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h3>
        </div>
        <div class="form-section">
            <label class="checkbox-label">
                <input type="checkbox" name="is_active" {% if product.is_active %}checked{% endif %}>
                <span>–¢–æ–≤–∞—Ä –∞–∫—Ç–∏–≤–Ω–∏–π (–ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ —Å–∞–π—Ç—ñ)</span>
            </label>
        </div>
    </div>

    <div class="form-footer">
        <a href="{{ url_for('admin_products') }}" class="btn btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
        <button type="submit" class="btn btn-primary btn-lg">üíæ –ó–±–µ—Ä–µ–≥—Ç–∏ –∑–º—ñ–Ω–∏</button>
    </div>
</form>

<!-- –ù–µ–±–µ–∑–ø–µ—á–Ω–∞ –∑–æ–Ω–∞ -->
<div class="card danger-zone" style="margin-top: 2rem;">
    <div class="card-header">
        <h3>‚ö†Ô∏è –ù–µ–±–µ–∑–ø–µ—á–Ω–∞ –∑–æ–Ω–∞</h3>
    </div>
    <div class="form-section">
        <p class="text-muted">–í–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É —î –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–æ—é –¥—ñ—î—é.</p>
        <form method="post" action="{{ url_for('admin_products_delete', product_id=product.id) }}" onsubmit="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π —Ç–æ–≤–∞—Ä?');">
            <button type="submit" class="btn btn-danger">üóëÔ∏è –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–æ–≤–∞—Ä</button>
        </form>
    </div>
</div>

<style>
.form-section {
    padding: 1.5rem;
}

.form-row {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
    margin-bottom: 1.25rem;
}

.form-row.three-col {
    grid-template-columns: repeat(3, 1fr);
}

.form-row:last-child {
    margin-bottom: 0;
}

.form-group {
    margin-bottom: 1.25rem;
}

.form-group:last-child {
    margin-bottom: 0;
}

.checkbox-label {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    cursor: pointer;
}

.checkbox-label input[type="checkbox"] {
    width: 20px;
    height: 20px;
    accent-color: var(--primary-color);
}

.image-preview {
    margin-top: 1rem;
}

.image-preview label {
    display: block;
    margin-bottom: 0.5rem;
    color: var(--text-secondary);
}

.image-preview img {
    max-width: 300px;
    border-radius: var(--radius);
    border: 2px solid var(--border-color);
}

.form-footer {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    padding: 1rem 0;
}

.btn-lg {
    padding: 1rem 2rem;
    font-size: 1.05rem;
}

.danger-zone {
    border-color: var(--danger-color);
}

.danger-zone .card-header h3 {
    color: var(--danger-color);
}

.danger-zone .text-muted {
    margin-bottom: 1rem;
}

@media (max-width: 900px) {
    .form-row,
    .form-row.three-col {
        grid-template-columns: 1fr;
    }
}
</style>
{% endblock %}
