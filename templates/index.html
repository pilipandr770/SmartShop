{% extends "base.html" %}

{% block title %}SmartShop AI â€“ {{ _('Your intelligent shopping assistant') }}{% endblock %}

{% block extra_styles %}
<style>
    /* HERO */
    .hero {
        display: grid;
        grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.1fr);
        gap: 1.75rem;
        margin-top: 0.5rem;
        align-items: center;
    }

    .hero-left {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .hero-kicker {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.32rem 0.7rem 0.32rem 0.32rem;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(45, 212, 191, 0.45);
        font-size: 0.72rem;
        color: var(--text-muted);
    }

    .hero-kicker-dot {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: radial-gradient(circle at 30% 20%, #bbf7d0 0, #22c55e 25%, #06b6d4 65%, #022c22 100%);
        box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.25), 0 0 24px rgba(34, 197, 94, 0.9);
    }

    .hero-title {
        font-size: clamp(2rem, 3vw + 0.5rem, 2.6rem);
        line-height: 1.12;
        font-weight: 730;
    }

    .hero-title span {
        background: linear-gradient(120deg, #22c55e, #a855f7, #06b6d4);
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
    }

    .hero-subtitle {
        font-size: 0.95rem;
        color: var(--text-muted);
        max-width: 32rem;
    }

    .hero-badges {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.25rem;
    }

    .hero-badge {
        padding: 0.3rem 0.7rem;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: rgba(15, 23, 42, 0.85);
        font-size: 0.7rem;
        color: var(--text-muted);
    }

    .hero-right {
        border-radius: var(--radius-xl);
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: radial-gradient(circle at 10% 0, rgba(52, 211, 153, 0.3) 0, rgba(15, 23, 42, 0.9) 38%, #020617 100%);
        padding: 1rem;
        box-shadow: var(--shadow-soft);
        position: relative;
        overflow: hidden;
    }

    .hero-right-inner {
        border-radius: calc(var(--radius-xl) - 0.4rem);
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: rgba(15, 23, 42, 0.92);
        padding: 0.9rem;
        display: grid;
        grid-template-columns: minmax(0, 1.2fr) minmax(0, 1fr);
        gap: 0.75rem;
    }

    .hero-mock-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 0.6rem;
        font-size: 0.74rem;
        color: var(--text-muted);
    }

    .hero-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        font-size: 0.7rem;
    }

    .hero-pill {
        padding: 0.22rem 0.55rem;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .hero-stats {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.55rem;
        font-size: 0.75rem;
    }

    .hero-stat {
        padding: 0.5rem 0.6rem;
        border-radius: 0.9rem;
        background: radial-gradient(circle at 0 0, rgba(52, 211, 153, 0.24) 0, rgba(15, 23, 42, 1) 55%);
        border: 1px solid rgba(45, 212, 191, 0.35);
    }

    .hero-stat strong {
        display: block;
        font-size: 0.85rem;
    }

    .hero-ai-chat {
        border-radius: 0.9rem;
        border: 1px solid rgba(148, 163, 184, 0.4);
        background: radial-gradient(circle at 100% 0, rgba(45, 212, 191, 0.2) 0, rgba(15, 23, 42, 1) 50%);
        padding: 0.6rem 0.7rem;
        font-size: 0.78rem;
        display: flex;
        flex-direction: column;
        gap: 0.45rem;
    }

    .ai-bubble {
        max-width: 100%;
        padding: 0.4rem 0.55rem;
        border-radius: 0.75rem;
        background: rgba(15, 23, 42, 0.95);
        border: 1px solid rgba(148, 163, 184, 0.55);
    }

    .ai-bubble.user {
        margin-left: auto;
        background: rgba(34, 197, 94, 0.12);
        border-color: rgba(34, 197, 94, 0.7);
    }

    .ai-input-mock {
        margin-top: 0.2rem;
        display: flex;
        align-items: center;
        gap: 0.4rem;
    }

    .ai-input-field {
        flex: 1;
        padding: 0.3rem 0.55rem;
        border-radius: 999px;
        border: 1px dashed rgba(148, 163, 184, 0.6);
        color: var(--text-muted);
    }

    .ai-input-btn {
        width: 26px;
        height: 26px;
        border-radius: 999px;
        background: linear-gradient(135deg, #22c55e, #14b8a6);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.8rem;
        color: #022c22;
    }

    /* FOUR MAIN BLOCKS */
    .features {
        margin-top: 0.5rem;
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 1rem;
    }

    .feature-card {
        position: relative;
        border-radius: 1.1rem;
        padding: 0.9rem 0.9rem 0.75rem;
        background: radial-gradient(circle at 0 0, rgba(148, 163, 184, 0.24) 0, rgba(15, 23, 42, 1) 60%);
        border: 1px solid rgba(148, 163, 184, 0.55);
        cursor: pointer;
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
        transition: transform var(--transition-fast), box-shadow var(--transition-fast), border-color var(--transition-fast), background var(--transition-fast);
        overflow: hidden;
    }

    .feature-card::before {
        content: "";
        position: absolute;
        inset: 0;
        background: radial-gradient(circle at top, rgba(45, 212, 191, 0.32), transparent 65%);
        opacity: 0;
        transition: opacity var(--transition-fast);
        pointer-events: none;
    }

    .feature-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 18px 40px rgba(15, 23, 42, 0.95);
        border-color: rgba(45, 212, 191, 0.75);
    }

    .feature-card:hover::before {
        opacity: 1;
    }

    .feature-tag {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: var(--text-muted);
    }

    .feature-title {
        font-size: 0.95rem;
        font-weight: 620;
    }

    .feature-thumb {
        margin-top: 0.1rem;
        border-radius: 0.75rem;
        border: 1px solid rgba(15, 23, 42, 0.8);
        background-size: cover;
        background-position: center;
        min-height: 90px;
        position: relative;
        overflow: hidden;
    }

    .feature-thumb-overlay {
        position: absolute;
        inset: 0;
        background: linear-gradient(135deg, rgba(15, 23, 42, 0.2), rgba(15, 23, 42, 0.75));
    }

    .feature-thumb-label {
        position: absolute;
        left: 0.6rem;
        bottom: 0.55rem;
        font-size: 0.7rem;
        padding: 0.15rem 0.55rem;
        border-radius: 999px;
        background: rgba(15, 23, 42, 0.9);
        border: 1px solid rgba(148, 163, 184, 0.6);
    }

    .feature-meta {
        font-size: 0.7rem;
        color: var(--text-muted);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 0.4rem;
        margin-top: 0.15rem;
    }

    /* PRODUCTS GRID */
    .products-section {
        margin-top: 2rem;
    }

    .products-grid {
        margin-top: 0.75rem;
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 1rem;
    }

    .product-card {
        border-radius: 1rem;
        border: 1px solid rgba(148, 163, 184, 0.45);
        background: rgba(15, 23, 42, 0.9);
        padding: 0.75rem;
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .product-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 30px rgba(0,0,0,0.4);
    }

    .product-img {
        border-radius: 0.75rem;
        overflow: hidden;
        border: 1px solid rgba(15, 23, 42, 0.9);
        background: radial-gradient(circle at top, rgba(52, 211, 153, 0.16), rgba(15, 23, 42, 1));
        min-height: 120px;
    }

    .product-img-inner {
        width: 100%;
        height: 120px;
        background-size: cover;
        background-position: center;
    }

    .product-title {
        font-size: 0.9rem;
        font-weight: 600;
    }

    .product-price {
        font-size: 0.9rem;
        color: #bbf7d0;
    }

    .product-meta {
        font-size: 0.72rem;
        color: var(--text-muted);
    }

    /* RESPONSIVE */
    @media (max-width: 920px) {
        .hero {
            grid-template-columns: minmax(0, 1fr);
        }

        .hero-right {
            order: -1;
        }

        .features {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .products-grid {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
    }

    @media (max-width: 640px) {
        .features {
            grid-template-columns: minmax(0, 1fr);
        }

        .products-grid {
            grid-template-columns: minmax(0, 1fr);
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- HERO -->
<section class="hero" id="top">
    <div class="hero-left">
        <div class="hero-kicker">
            <div class="hero-kicker-dot"></div>
            <span>{{ _('Welcome to SmartShop AI') }}</span>
        </div>

        <h1 class="hero-title">
            {{ _('Your intelligent shopping assistant') }}
        </h1>

        <p class="hero-subtitle">
            {{ settings.blog_excerpt or _('Your intelligent shopping assistant') }}
        </p>

        <div class="hero-badges">
            <span class="hero-badge">Flask + HTML/CSS</span>
            <span class="hero-badge">Stripe</span>
            <span class="hero-badge">{{ _('Blog') }}</span>
            <span class="hero-badge">{{ _('AI Assistant') }}</span>
        </div>
    </div>

    <aside class="hero-right">
        <div class="hero-right-inner">
            <div>
                <div class="hero-mock-header">
                    <span>{{ _('Admin Panel') }}</span>
                    <span style="color:#a5b4fc;">demo@store</span>
                </div>

                <div class="hero-pills">
                    <div class="hero-pill">{{ _('Categories') }}</div>
                    <div class="hero-pill">{{ _('Products') }}</div>
                    <div class="hero-pill">{{ _('Orders') }}</div>
                    <div class="hero-pill">{{ _('Blog') }}</div>
                </div>

                <div class="hero-stats" style="margin-top:0.7rem;">
                    <div class="hero-stat">
                        <strong>{{ total_products }} {{ _('Products') }}</strong>
                        {{ _('All Categories') }}
                    </div>
                    <div class="hero-stat">
                        <strong>{{ categories|length }} {{ _('Categories') }}</strong>
                        {{ _('Shop') }}
                    </div>
                    <div class="hero-stat">
                        <strong>{{ total_orders }} {{ _('Orders') }}</strong>
                        {{ _('Total') }}
                    </div>
                    <div class="hero-stat">
                        <strong>{{ "%.2f"|format(total_revenue) }} EUR</strong>
                        Stripe
                    </div>
                </div>
            </div>

            <div class="hero-ai-chat">
                <div style="font-size:0.72rem;color:var(--text-muted);margin-bottom:0.15rem;">
                    {{ _('AI Assistant') }}
                </div>
                <div class="ai-bubble user">
                    {{ _('How can I help you?') }}
                </div>
                <div class="ai-bubble">
                    {{ _('Ask me anything...') }}
                </div>
                <div class="ai-input-mock">
                    <div class="ai-input-field">{{ _('Ask me anything...') }}</div>
                    <div class="ai-input-btn">&#10148;</div>
                </div>
            </div>
        </div>
    </aside>
</section>

<!-- FOUR MAIN BLOCKS -->
<section class="features">
    <!-- About -->
    <a href="{{ url_for('about_page') }}" class="feature-card">
        <div class="feature-tag">1</div>
        <h2 class="feature-title">{{ _('About') }}</h2>
        <div class="feature-thumb"
             style="background-image: url('https://images.pexels.com/photos/6476587/pexels-photo-6476587.jpeg?auto=compress&cs=tinysrgb&w=800');">
            <div class="feature-thumb-overlay"></div>
        </div>
        <div class="feature-meta">
            <span>{{ _('Learn more') }} &#8594;</span>
        </div>
    </a>

    <!-- Shop -->
    <a href="{{ url_for('shop') }}" class="feature-card">
        <div class="feature-tag">2</div>
        <h2 class="feature-title">{{ _('Shop') }}</h2>
        <div class="feature-thumb"
             style="background-image: url('https://images.pexels.com/photos/5632389/pexels-photo-5632389.jpeg?auto=compress&cs=tinysrgb&w=800');">
            <div class="feature-thumb-overlay"></div>
            <div class="feature-thumb-label">{{ total_products }} {{ _('Products') }}</div>
        </div>
        <div class="feature-meta">
            <span>{{ _('View all') }} &#8594;</span>
        </div>
    </a>

    <!-- Blog -->
    <a href="{{ url_for('blog_page') }}" class="feature-card">
        <div class="feature-tag">3</div>
        <h2 class="feature-title">{{ _('Blog') }}</h2>
        <div class="feature-thumb"
             style="background-image: url('https://images.pexels.com/photos/1181675/pexels-photo-1181675.jpeg?auto=compress&cs=tinysrgb&w=800');">
            <div class="feature-thumb-overlay"></div>
        </div>
        <div class="feature-meta">
            <span>{{ _('Read more') }} &#8594;</span>
        </div>
    </a>

    <!-- AI Chat -->
    <a href="{{ url_for('ai_assistant_page') }}" class="feature-card">
        <div class="feature-tag">4</div>
        <h2 class="feature-title">{{ _('AI Assistant') }}</h2>
        <div class="feature-thumb"
             style="background-image: url('https://images.pexels.com/photos/8867439/pexels-photo-8867439.jpeg?auto=compress&cs=tinysrgb&w=800');">
            <div class="feature-thumb-overlay"></div>
        </div>
        <div class="feature-meta">
            <span>{{ _('Ask me anything...') }} &#8594;</span>
        </div>
    </a>
</section>

<!-- PRODUCTS PREVIEW -->
<section class="products-section">
    <h2 style="font-size:1.1rem;margin-bottom:0.25rem;">{{ _('Featured Products') }}</h2>
    <div class="products-grid">
        {% if products %}
            {% for p in products %}
                <a href="{{ url_for('product_page', product_id=p.id) }}" class="product-card">
                    <div class="product-img">
                        <div class="product-img-inner"
                             style="background-image:url('{{ p.image_url or 'https://images.pexels.com/photos/3965545/pexels-photo-3965545.jpeg?auto=compress&cs=tinysrgb&w=800' }}');">
                        </div>
                    </div>
                    <div class="product-title">{{ p.name }}</div>
                    <div class="product-price">
                        {{ "%.2f"|format(p.price) }} {{ get_currency_symbol(p.currency) }}
                    </div>
                    <div class="product-meta">
                        {{ p.short_description or '' }}
                    </div>
                </a>
            {% endfor %}
        {% else %}
            <p style="font-size:0.86rem;color:var(--text-muted);margin-top:0.5rem;">
                {{ _('No results found') }}
            </p>
        {% endif %}
    </div>
</section>

<!-- BLOG PREVIEW -->
{% if blog_posts %}
<section class="products-section">
    <h2 style="font-size:1.1rem;margin-bottom:0.25rem;">{{ _('Latest from Blog') }}</h2>
    <div class="products-grid" style="grid-template-columns: repeat(3, minmax(0, 1fr));">
        {% for post in blog_posts %}
        <a href="{{ url_for('blog_post_page', slug=post.slug) }}" class="product-card">
            <div class="product-img">
                <div class="product-img-inner"
                     style="background-image:url('{{ post.featured_image or 'https://images.pexels.com/photos/3184292/pexels-photo-3184292.jpeg?auto=compress&cs=tinysrgb&w=800' }}');">
                </div>
            </div>
            <div style="font-size:0.7rem;color:var(--accent);margin-bottom:0.2rem;">
                {{ post.publish_date.strftime('%d.%m.%Y') if post.publish_date else post.created_at.strftime('%d.%m.%Y') }}
                {% if post.is_ai_generated %}
                <span style="background:rgba(168,85,247,0.2);color:#a855f7;padding:0.1rem 0.3rem;border-radius:0.2rem;font-size:0.6rem;margin-left:0.3rem;">&#129302; AI</span>
                {% endif %}
            </div>
            <div class="product-title">{{ post.title }}</div>
            <div class="product-meta">
                {{ (post.excerpt[:100] if post.excerpt else (post.content[:100] if post.content else '')) }}...
            </div>
        </a>
        {% endfor %}
    </div>
    <div style="text-align:center;margin-top:1rem;">
        <a href="{{ url_for('blog_page') }}" class="btn">{{ _('View all') }} &#8594;</a>
    </div>
</section>
{% endif %}
{% endblock %}
